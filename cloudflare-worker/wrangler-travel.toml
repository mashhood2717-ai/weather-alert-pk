name = "travel-weather-api"
main = "travel-weather-worker.js"
compatibility_date = "2024-01-01"

# Environment variables - set these with: wrangler secret put WEATHER_API_KEY
# wrangler secret put CHECKWX_API_KEY

[vars]
ENVIRONMENT = "production"

# KV Namespace for caching Pakistan METAR and Weather data
[[kv_namespaces]]
binding = "METAR_CACHE"
id = "1416c83092a848ef8e2bf84592b6d91a"

# Cron triggers:
# - At :02, :17, :32, :47: Refresh METAR for all Pakistan airports (2 min after METAR publish)
# - At :02, :32: Refresh Weather for all toll plazas (2 min after 30-min mark)
[triggers]
crons = ["2,17,32,47 * * * *", "2,32 * * * *"]

# Routes (update with your domain if needed)
# routes = [
#   { pattern = "travel-weather.yourdomain.com/*", zone_name = "yourdomain.com" }
# ]
